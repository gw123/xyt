<?php
//  id 获取 图片
namespace frontend\controllers;

use Yii;
use yii\web\Controller;
use yii\web\NotFoundHttpException;
use yii\filters\VerbFilter;

use common\models\File;
use common\models\FileQuery;
use common\utils\Qrcode;
/**
 * VideoController implements the CRUD actions for Video model.
 */
class ToolController extends BackendController
{
     public function behaviors()
    {
        return [
            'verbs' => [
                'class' => VerbFilter::className(),
                'actions' => [
                    'upload-file' => ['post'],
                ],
            ],
        ];
    }

     public $enableCsrfValidation = false;

    public function actionCode()
    {
        Qrcode::generateCode();
    }


    //获取封面地址
     public  function actionCover()
     {
         $id = Yii::$app->request->get('id',0);
         $url = FileQuery::getFileDownloadUrl($id);
         if(!$url)
         {
             header('Content-type: image/jpg');
             header("Location: /images/default.jpg");
             exit();
         }
         //echo $url; exit;
         header("Location: $url");
         exit();
     }

    public  function  actionImportSchool()
    {
        $school = file_get_contents('school.json');

        $schools= json_decode($school , true);
        $db = Yii::$app->db;
        foreach ($schools as $item)
        {
            foreach ($item as $school)
            {

                foreach ($school  as  $attr => $value )
                {
                    if(is_array($value))
                        $school[$attr] = implode( ',' ,$value );
                }
                try{
                    //$db->createCommand()->insert('school' , $school )->execute(); //exit();
                }catch (Exception $e)
                {
                    echo $e->getMessage();
                }

            }
        }
    }

    public  function  actionSchoolToCategory()
    {
        set_time_limit(3600);
        $sql = "select schoolcode as code  , schoolname as name from school ";

        $res = Yii::$app->db->createCommand($sql)->queryAll();

        foreach ($res as $item)
        {
            $item['groupId'] = 3;
            Yii::$app->db->createCommand()->insert('category' , $item )->execute();
        }
    }

    // 导入目录
     public  function   actionCategory()
     {
           $json = '{"10":{"code":"10","parent":0,"name":"学科门类：医学"},"12":{"code":"12","parent":0,"name":"学科门类：管理学"},"13":{"code":"13","parent":0,"name":"学科门类：艺术学"},"1001":{"code":"1001","parent":"10","name":"基础医学类"},"1002":{"code":"1002","parent":"10","name":"临床医学类"},"1003":{"code":"1003","parent":"10","name":"口腔医学类"},"1004":{"code":"1004","parent":"10","name":"公共卫生与预防医学类"},"1005":{"code":"1005","parent":"10","name":"中医学类"},"1006":{"code":"1006","parent":"10","name":"中西医结合类"},"1007":{"code":"1007","parent":"10","name":"药学类"},"1008":{"code":"1008","parent":"10","name":"中药学类"},"1009":{"code":"1009","parent":"10","name":"法医学类"},"1010":{"code":"1010","parent":"10","name":"医学技术类"},"1011":{"code":"1011","parent":"10","name":"护理学类"},"1201":{"code":"1201","parent":"12","name":"管理科学与工程类"},"1202":{"code":"1202","parent":"12","name":"工商管理类"},"1203":{"code":"1203","parent":"12","name":"农业经济管理类"},"1204":{"code":"1204","parent":"12","name":"公共管理类"},"1205":{"code":"1205","parent":"12","name":"图书情报与档案管理类"},"1206":{"code":"1206","parent":"12","name":"物流管理与工程类"},"1207":{"code":"1207","parent":"12","name":"工业工程类"},"1208":{"code":"1208","parent":"12","name":"电子商务类"},"1209":{"code":"1209","parent":"12","name":"旅游管理类"},"1301":{"code":"1301","parent":"13","name":"艺术学理论类"},"1302":{"code":"1302","parent":"13","name":"音乐与舞蹈学类"},"1303":{"code":"1303","parent":"13","name":"戏剧与影视学类"},"1304":{"code":"1304","parent":"13","name":"美术学类"},"1305":{"code":"1305","parent":"13","name":"设计学类"},"100402":{"code":"100402","parent":"1004","name":"食品卫生与营养学"},"100701":{"code":"100701","parent":"1007","name":"药学"},"100702":{"code":"100702","parent":"1007","name":"药物制剂"},"100801":{"code":"100801","parent":"1008","name":"中药学"},"100802":{"code":"100802","parent":"1008","name":"中药资源与开发"},"101001":{"code":"101001","parent":"1010","name":"医学检验技术"},"101002":{"code":"101002","parent":"1010","name":"医学实验技术"},"101003":{"code":"101003","parent":"1010","name":"医学影像技术"},"101004":{"code":"101004","parent":"1010","name":"眼视光学"},"101005":{"code":"101005","parent":"1010","name":"康复治疗学"},"101006":{"code":"101006","parent":"1010","name":"口腔医学技术"},"101007":{"code":"101007","parent":"1010","name":"卫生检验与检疫"},"101101":{"code":"101101","parent":"1011","name":"护理学"},"120101":{"code":"120101","parent":"1201","name":"管理科学"},"120102":{"code":"120102","parent":"1201","name":"信息管理与信息系统"},"120103":{"code":"120103","parent":"1201","name":"工程管理"},"120104":{"code":"120104","parent":"1201","name":"房地产开发与管理"},"120105":{"code":"120105","parent":"1201","name":"工程造价"},"120202":{"code":"120202","parent":"1202","name":"市场营销"},"120204":{"code":"120204","parent":"1202","name":"财务管理"},"120205":{"code":"120205","parent":"1202","name":"国际商务"},"120206":{"code":"120206","parent":"1202","name":"人力资源管理"},"120207":{"code":"120207","parent":"1202","name":"审计学"},"120208":{"code":"120208","parent":"1202","name":"资产评估"},"120209":{"code":"120209","parent":"1202","name":"物业管理"},"120210":{"code":"120210","parent":"1202","name":"文化产业管理"},"120301":{"code":"120301","parent":"1203","name":"农林经济管理"},"120302":{"code":"120302","parent":"1203","name":"农村区域发展"},"120401":{"code":"120401","parent":"1204","name":"公共事业管理"},"120402":{"code":"120402","parent":"1204","name":"行政管理"},"120403":{"code":"120403","parent":"1204","name":"劳动与社会保障"},"120404":{"code":"120404","parent":"1204","name":"土地资源管理"},"120405":{"code":"120405","parent":"1204","name":"城市管理"},"120501":{"code":"120501","parent":"1205","name":"图书馆学"},"120502":{"code":"120502","parent":"1205","name":"档案学"},"120503":{"code":"120503","parent":"1205","name":"信息资源管理"},"120601":{"code":"120601","parent":"1206","name":"物流管理"},"120602":{"code":"120602","parent":"1206","name":"物流工程"},"120701":{"code":"120701","parent":"1207","name":"工业工程"},"120801":{"code":"120801","parent":"1208","name":"电子商务"},"120902":{"code":"120902","parent":"1209","name":"酒店管理"},"120903":{"code":"120903","parent":"1209","name":"会展经济与管理"},"130101":{"code":"130101","parent":"1301","name":"艺术史论"},"130201":{"code":"130201","parent":"1302","name":"音乐表演"},"130202":{"code":"130202","parent":"1302","name":"音乐学"},"130203":{"code":"130203","parent":"1302","name":"作曲与作曲技术理论"},"130204":{"code":"130204","parent":"1302","name":"舞蹈表演"},"130205":{"code":"130205","parent":"1302","name":"舞蹈学"},"130206":{"code":"130206","parent":"1302","name":"舞蹈编导"},"130301":{"code":"130301","parent":"1303","name":"表演"},"130302":{"code":"130302","parent":"1303","name":"戏剧学"},"130303":{"code":"130303","parent":"1303","name":"电影学"},"130304":{"code":"130304","parent":"1303","name":"戏剧影视文学"},"130305":{"code":"130305","parent":"1303","name":"广播电视编导"},"130306":{"code":"130306","parent":"1303","name":"戏剧影视导演"},"130307":{"code":"130307","parent":"1303","name":"戏剧影视美术设计"},"130308":{"code":"130308","parent":"1303","name":"录音艺术"},"130309":{"code":"130309","parent":"1303","name":"播音与主持艺术"},"130310":{"code":"130310","parent":"1303","name":"动画"},"130401":{"code":"130401","parent":"1304","name":"美术学"},"130402":{"code":"130402","parent":"1304","name":"绘画"},"130403":{"code":"130403","parent":"1304","name":"雕塑"},"130404":{"code":"130404","parent":"1304","name":"摄影"},"130501":{"code":"130501","parent":"1305","name":"艺术设计学"},"130502":{"code":"130502","parent":"1305","name":"视觉传达设计"},"130503":{"code":"130503","parent":"1305","name":"环境设计"},"130504":{"code":"130504","parent":"1305","name":"产品设计"},"130505":{"code":"130505","parent":"1305","name":"服装与服饰设计"},"130506":{"code":"130506","parent":"1305","name":"公共艺术"},"130507":{"code":"130507","parent":"1305","name":"工艺美术"},"130508":{"code":"130508","parent":"1305","name":"数字媒体艺术"},"01":{"code":"01","parent":0,"name":"学科门类：哲学"},"0101":{"code":"0101","parent":"01","name":"哲学类"},"010101":{"code":"010101","parent":"0101","name":"哲学"},"010102":{"code":"010102","parent":"0101","name":"逻辑学"},"010103K":{"code":"010103K","parent":"0101","name":"宗教学"},"02":{"code":"02","parent":0,"name":"学科门类：经济学"},"0201":{"code":"0201","parent":"02","name":"经济学类"},"020101":{"code":"020101","parent":"0201","name":"经济学"},"020102":{"code":"020102","parent":"0201","name":"经济统计学"},"0202":{"code":"0202","parent":"02","name":"财政学类"},"020201K":{"code":"020201K","parent":"0202","name":"财政学"},"020202":{"code":"020202","parent":"0202","name":"税收学"},"0203":{"code":"0203","parent":"02","name":"金融学类"},"020301K":{"code":"020301K","parent":"0203","name":"金融学"},"020302":{"code":"020302","parent":"0203","name":"金融工程"},"020303":{"code":"020303","parent":"0203","name":"保险学"},"020304":{"code":"020304","parent":"0203","name":"投资学"},"0204":{"code":"0204","parent":"02","name":"经济与贸易类"},"020401":{"code":"020401","parent":"0204","name":"国际经济与贸易"},"020402":{"code":"020402","parent":"0204","name":"贸易经济"},"03":{"code":"03","parent":0,"name":"学科门类：法学"},"0301":{"code":"0301","parent":"03","name":"法学类"},"030101K":{"code":"030101K","parent":"0301","name":"法学"},"0302":{"code":"0302","parent":"03","name":"政治学类"},"030201":{"code":"030201","parent":"0302","name":"政治学与行政学"},"030202":{"code":"030202","parent":"0302","name":"国际政治"},"030203":{"code":"030203","parent":"0302","name":"外交学"},"0303":{"code":"0303","parent":"03","name":"社会学类"},"030301":{"code":"030301","parent":"0303","name":"社会学"},"030302":{"code":"030302","parent":"0303","name":"社会工作"},"0304":{"code":"0304","parent":"03","name":"民族学类"},"030401":{"code":"030401","parent":"0304","name":"民族学"},"0305":{"code":"0305","parent":"03","name":"马克思主义理论类"},"030501":{"code":"030501","parent":"0305","name":"科学社会主义"},"030502":{"code":"030502","parent":"0305","name":"中国共产党历史"},"030503":{"code":"030503","parent":"0305","name":"思想政治教育"},"0306":{"code":"0306","parent":"03","name":"公安学类"},"030601K":{"code":"030601K","parent":"0306","name":"治安学"},"030602K":{"code":"030602K","parent":"0306","name":"侦查学"},"030603K":{"code":"030603K","parent":"0306","name":"边防管理"},"04":{"code":"04","parent":0,"name":"学科门类：教育学"},"0401":{"code":"0401","parent":"04","name":"教育学类"},"040101":{"code":"040101","parent":"0401","name":"教育学"},"040102":{"code":"040102","parent":"0401","name":"科学教育"},"040103":{"code":"040103","parent":"0401","name":"人文教育"},"040104":{"code":"040104","parent":"0401","name":"教育技术学"},"040105":{"code":"040105","parent":"0401","name":"艺术教育"},"040106":{"code":"040106","parent":"0401","name":"学前教育"},"040107":{"code":"040107","parent":"0401","name":"小学教育"},"040108":{"code":"040108","parent":"0401","name":"特殊教育"},"0402":{"code":"0402","parent":"04","name":"体育学类"},"040201":{"code":"040201","parent":"0402","name":"体育教育"},"040202K":{"code":"040202K","parent":"0402","name":"运动训练"},"040203":{"code":"040203","parent":"0402","name":"社会体育指导与管理"},"040204K":{"code":"040204K","parent":"0402","name":"武术与民族传统体育"},"040205":{"code":"040205","parent":"0402","name":"运动人体科学"},"05":{"code":"05","parent":0,"name":"学科门类：文学"},"0501":{"code":"0501","parent":"05","name":"中国语言文学类"},"050101":{"code":"050101","parent":"0501","name":"汉语言文学"},"050102":{"code":"050102","parent":"0501","name":"汉语言"},"050103":{"code":"050103","parent":"0501","name":"汉语国际教育"},"050104":{"code":"050104","parent":"0501","name":"中国少数民族语言文学"},"050105":{"code":"050105","parent":"0501","name":"古典文献学"},"0502":{"code":"0502","parent":"05","name":"外国语言文学类"},"050201":{"code":"050201","parent":"0502","name":"英语"},"050202":{"code":"050202","parent":"0502","name":"俄语"},"050203":{"code":"050203","parent":"0502","name":"德语"},"050204":{"code":"050204","parent":"0502","name":"法语"},"050205":{"code":"050205","parent":"0502","name":"西班牙语"},"050206":{"code":"050206","parent":"0502","name":"阿拉伯语"},"050207":{"code":"050207","parent":"0502","name":"日语"},"050208":{"code":"050208","parent":"0502","name":"波斯语"},"050209":{"code":"050209","parent":"0502","name":"朝鲜语"},"050210":{"code":"050210","parent":"0502","name":"菲律宾语"},"050211":{"code":"050211","parent":"0502","name":"梵语巴利语"},"050212":{"code":"050212","parent":"0502","name":"印度尼西亚语"},"050213":{"code":"050213","parent":"0502","name":"印地语"},"050214":{"code":"050214","parent":"0502","name":"柬埔寨语"},"050215":{"code":"050215","parent":"0502","name":"老挝语"},"050216":{"code":"050216","parent":"0502","name":"缅甸语"},"050217":{"code":"050217","parent":"0502","name":"马来语"},"050218":{"code":"050218","parent":"0502","name":"蒙古语"},"050219":{"code":"050219","parent":"0502","name":"僧伽罗语"},"050220":{"code":"050220","parent":"0502","name":"泰语"},"050221":{"code":"050221","parent":"0502","name":"乌尔都语"},"050222":{"code":"050222","parent":"0502","name":"希伯来语"},"050223":{"code":"050223","parent":"0502","name":"越南语"},"050224":{"code":"050224","parent":"0502","name":"豪萨语"},"050225":{"code":"050225","parent":"0502","name":"斯瓦希里语"},"050226":{"code":"050226","parent":"0502","name":"阿尔巴尼亚语"},"050227":{"code":"050227","parent":"0502","name":"保加利亚语"},"050228":{"code":"050228","parent":"0502","name":"波兰语"},"050229":{"code":"050229","parent":"0502","name":"捷克语"},"050230":{"code":"050230","parent":"0502","name":"斯洛伐克语"},"050231":{"code":"050231","parent":"0502","name":"罗马尼亚语"},"050232":{"code":"050232","parent":"0502","name":"葡萄牙语"},"050233":{"code":"050233","parent":"0502","name":"瑞典语"},"050234":{"code":"050234","parent":"0502","name":"塞尔维亚语"},"050235":{"code":"050235","parent":"0502","name":"土耳其语"},"050236":{"code":"050236","parent":"0502","name":"希腊语"},"050237":{"code":"050237","parent":"0502","name":"匈牙利语"},"050238":{"code":"050238","parent":"0502","name":"意大利语"},"050239":{"code":"050239","parent":"0502","name":"泰米尔语"},"050240":{"code":"050240","parent":"0502","name":"普什图语"},"050241":{"code":"050241","parent":"0502","name":"世界语"},"050242":{"code":"050242","parent":"0502","name":"孟加拉语"},"050243":{"code":"050243","parent":"0502","name":"尼泊尔语"},"050244":{"code":"050244","parent":"0502","name":"克罗地亚语"},"050245":{"code":"050245","parent":"0502","name":"荷兰语"},"050246":{"code":"050246","parent":"0502","name":"芬兰语"},"050247":{"code":"050247","parent":"0502","name":"乌克兰语"},"050248":{"code":"050248","parent":"0502","name":"挪威语"},"050249":{"code":"050249","parent":"0502","name":"丹麦语"},"050250":{"code":"050250","parent":"0502","name":"冰岛语"},"050251":{"code":"050251","parent":"0502","name":"爱尔兰语"},"050252":{"code":"050252","parent":"0502","name":"拉脱维亚语"},"050253":{"code":"050253","parent":"0502","name":"立陶宛语"},"050254":{"code":"050254","parent":"0502","name":"斯洛文尼亚语"},"050255":{"code":"050255","parent":"0502","name":"爱沙尼亚语"},"050256":{"code":"050256","parent":"0502","name":"马耳他语"},"050257":{"code":"050257","parent":"0502","name":"哈萨克语"},"050258":{"code":"050258","parent":"0502","name":"乌兹别克语"},"050259":{"code":"050259","parent":"0502","name":"祖鲁语"},"050260":{"code":"050260","parent":"0502","name":"拉丁语"},"050261":{"code":"050261","parent":"0502","name":"翻译"},"050262":{"code":"050262","parent":"0502","name":"商务英语"},"0503":{"code":"0503","parent":"05","name":"新闻传播学类"},"050301":{"code":"050301","parent":"0503","name":"新闻学"},"050302":{"code":"050302","parent":"0503","name":"广播电视学"},"050303":{"code":"050303","parent":"0503","name":"广告学"},"050304":{"code":"050304","parent":"0503","name":"传播学"},"050305":{"code":"050305","parent":"0503","name":"编辑出版学"},"06":{"code":"06","parent":0,"name":"学科门类：历史学"},"0601":{"code":"0601","parent":"06","name":"历史学类"},"060101":{"code":"060101","parent":"0601","name":"历史学"},"060102":{"code":"060102","parent":"0601","name":"世界史"},"060103":{"code":"060103","parent":"0601","name":"考古学"},"060104":{"code":"060104","parent":"0601","name":"文物与博物馆学"},"07":{"code":"07","parent":0,"name":"学科门类：理学"},"0701":{"code":"0701","parent":"07","name":"数学类"},"070101":{"code":"070101","parent":"0701","name":"数学与应用数学"},"070102":{"code":"070102","parent":"0701","name":"信息与计算科学"},"0702":{"code":"0702","parent":"07","name":"物理学类"},"070201":{"code":"070201","parent":"0702","name":"物理学"},"070202":{"code":"070202","parent":"0702","name":"应用物理学"},"070203":{"code":"070203","parent":"0702","name":"核物理"},"0703":{"code":"0703","parent":"07","name":"化学类"},"070301":{"code":"070301","parent":"0703","name":"化学"},"070302":{"code":"070302","parent":"0703","name":"应用化学"},"0704":{"code":"0704","parent":"07","name":"天文学类"},"070401":{"code":"070401","parent":"0704","name":"天文学"},"0705":{"code":"0705","parent":"07","name":"地理科学类"},"070501":{"code":"070501","parent":"0705","name":"地理科学"},"070502":{"code":"070502","parent":"0705","name":"自然地理与资源环境"},"070503":{"code":"070503","parent":"0705","name":"人文地理与城乡规划"},"070504":{"code":"070504","parent":"0705","name":"地理信息科学"},"0706":{"code":"0706","parent":"07","name":"大气科学类"},"070601":{"code":"070601","parent":"0706","name":"大气科学"},"070602":{"code":"070602","parent":"0706","name":"应用气象学"},"0707":{"code":"0707","parent":"07","name":"海洋科学类"},"070701":{"code":"070701","parent":"0707","name":"海洋科学"},"070702":{"code":"070702","parent":"0707","name":"海洋技术"},"0708":{"code":"0708","parent":"07","name":"地球物理学类"},"070801":{"code":"070801","parent":"0708","name":"地球物理学"},"070802":{"code":"070802","parent":"0708","name":"空间科学与技术"},"0709":{"code":"0709","parent":"07","name":"地质学类"},"070901":{"code":"070901","parent":"0709","name":"地质学"},"070902":{"code":"070902","parent":"0709","name":"地球化学"},"0710":{"code":"0710","parent":"07","name":"生物科学类"},"071001":{"code":"071001","parent":"0710","name":"生物科学"},"071002":{"code":"071002","parent":"0710","name":"生物技术"},"071003":{"code":"071003","parent":"0710","name":"生物信息学"},"071004":{"code":"071004","parent":"0710","name":"生态学"},"0711":{"code":"0711","parent":"07","name":"心理学类"},"071101":{"code":"071101","parent":"0711","name":"心理学"},"071102":{"code":"071102","parent":"0711","name":"应用心理学"},"0712":{"code":"0712","parent":"07","name":"统计学类"},"071201":{"code":"071201","parent":"0712","name":"统计学"},"071202":{"code":"071202","parent":"0712","name":"应用统计学"},"08":{"code":"08","parent":0,"name":"学科门类：工学"},"0801":{"code":"0801","parent":"08","name":"力学类"},"080101":{"code":"080101","parent":"0801","name":"理论与应用力学"},"080102":{"code":"080102","parent":"0801","name":"工程力学"},"0802":{"code":"0802","parent":"08","name":"机械类"},"080201":{"code":"080201","parent":"0802","name":"机械工程"},"080202":{"code":"080202","parent":"0802","name":"机械设计制造及其自动化"},"080203":{"code":"080203","parent":"0802","name":"材料成型及控制工程"},"080204":{"code":"080204","parent":"0802","name":"机械电子工程"},"080205":{"code":"080205","parent":"0802","name":"工业设计"},"080206":{"code":"080206","parent":"0802","name":"过程装备与控制工程"},"080207":{"code":"080207","parent":"0802","name":"车辆工程"},"080208":{"code":"080208","parent":"0802","name":"汽车服务工程"},"0803":{"code":"0803","parent":"08","name":"仪器类"},"080301":{"code":"080301","parent":"0803","name":"测控技术与仪器"},"0804":{"code":"0804","parent":"08","name":"材料类"},"080401":{"code":"080401","parent":"0804","name":"材料科学与工程"},"080402":{"code":"080402","parent":"0804","name":"材料物理"},"080403":{"code":"080403","parent":"0804","name":"材料化学"},"080404":{"code":"080404","parent":"0804","name":"冶金工程"},"080405":{"code":"080405","parent":"0804","name":"金属材料工程"},"080406":{"code":"080406","parent":"0804","name":"无机非金属材料工程"},"080407":{"code":"080407","parent":"0804","name":"高分子材料与工程"},"080408":{"code":"080408","parent":"0804","name":"复合材料与工程"},"0805":{"code":"0805","parent":"08","name":"能源动力类"},"080501":{"code":"080501","parent":"0805","name":"能源与动力工程"},"0806":{"code":"0806","parent":"08","name":"电气类"},"080601":{"code":"080601","parent":"0806","name":"电气工程及其自动化"},"0807":{"code":"0807","parent":"08","name":"电子信息类"},"080701":{"code":"080701","parent":"0807","name":"电子信息工程"},"080702":{"code":"080702","parent":"0807","name":"电子科学与技术"},"080703":{"code":"080703","parent":"0807","name":"通信工程"},"080704":{"code":"080704","parent":"0807","name":"微电子科学与工程"},"080705":{"code":"080705","parent":"0807","name":"光电信息科学与工程"},"080706":{"code":"080706","parent":"0807","name":"信息工程"},"0808":{"code":"0808","parent":"08","name":"自动化类"},"080801":{"code":"080801","parent":"0808","name":"自动化"},"0809":{"code":"0809","parent":"08","name":"计算机类"},"080901":{"code":"080901","parent":"0809","name":"计算机科学与技术"},"080902":{"code":"080902","parent":"0809","name":"软件工程"},"080903":{"code":"080903","parent":"0809","name":"网络工程"},"080904K":{"code":"080904K","parent":"0809","name":"信息安全"},"080905":{"code":"080905","parent":"0809","name":"物联网工程"},"080906":{"code":"080906","parent":"0809","name":"数字媒体技术"},"0810":{"code":"0810","parent":"08","name":"土木类"},"081001":{"code":"081001","parent":"0810","name":"土木工程"},"081002":{"code":"081002","parent":"0810","name":"建筑环境与能源应用工程"},"081003":{"code":"081003","parent":"0810","name":"给排水科学与工程"},"081004":{"code":"081004","parent":"0810","name":"建筑电气与智能化"},"0811":{"code":"0811","parent":"08","name":"水利类"},"081101":{"code":"081101","parent":"0811","name":"水利水电工程"},"081102":{"code":"081102","parent":"0811","name":"水文与水资源工程"},"081103":{"code":"081103","parent":"0811","name":"港口航道与海岸工程"},"0812":{"code":"0812","parent":"08","name":"测绘类"},"081201":{"code":"081201","parent":"0812","name":"测绘工程"},"081202":{"code":"081202","parent":"0812","name":"遥感科学与技术"},"0813":{"code":"0813","parent":"08","name":"化工与制药类"},"081301":{"code":"081301","parent":"0813","name":"化学工程与工艺"},"081302":{"code":"081302","parent":"0813","name":"制药工程"},"0814":{"code":"0814","parent":"08","name":"地质类"},"081401":{"code":"081401","parent":"0814","name":"地质工程"},"081402":{"code":"081402","parent":"0814","name":"勘查技术与工程"},"081403":{"code":"081403","parent":"0814","name":"资源勘查工程"},"0815":{"code":"0815","parent":"08","name":"矿业类"},"081501":{"code":"081501","parent":"0815","name":"采矿工程"},"081502":{"code":"081502","parent":"0815","name":"石油工程"},"081503":{"code":"081503","parent":"0815","name":"矿物加工工程"},"081504":{"code":"081504","parent":"0815","name":"油气储运工程"},"0816":{"code":"0816","parent":"08","name":"纺织类"},"081601":{"code":"081601","parent":"0816","name":"纺织工程"},"081602":{"code":"081602","parent":"0816","name":"服装设计与工程"},"0817":{"code":"0817","parent":"08","name":"轻工类"},"081701":{"code":"081701","parent":"0817","name":"轻化工程"},"081702":{"code":"081702","parent":"0817","name":"包装工程"},"081703":{"code":"081703","parent":"0817","name":"印刷工程"},"0818":{"code":"0818","parent":"08","name":"交通运输类"},"081801":{"code":"081801","parent":"0818","name":"交通运输"},"081802":{"code":"081802","parent":"0818","name":"交通工程"},"081803K":{"code":"081803K","parent":"0818","name":"航海技术"},"081804K":{"code":"081804K","parent":"0818","name":"轮机工程"},"081805K":{"code":"081805K","parent":"0818","name":"飞行技术"},"0819":{"code":"0819","parent":"08","name":"海洋工程类"},"081901":{"code":"081901","parent":"0819","name":"船舶与海洋工程"},"0820":{"code":"0820","parent":"08","name":"航空航天类"},"082001":{"code":"082001","parent":"0820","name":"航空航天工程"},"082002":{"code":"082002","parent":"0820","name":"飞行器设计与工程"},"082003":{"code":"082003","parent":"0820","name":"飞行器制造工程"},"082004":{"code":"082004","parent":"0820","name":"飞行器动力工程"},"082005":{"code":"082005","parent":"0820","name":"飞行器环境与生命保障工程"},"0821":{"code":"0821","parent":"08","name":"兵器类"},"082101":{"code":"082101","parent":"0821","name":"武器系统与工程"},"082102":{"code":"082102","parent":"0821","name":"武器发射工程"},"082103":{"code":"082103","parent":"0821","name":"探测制导与控制技术"},"082104":{"code":"082104","parent":"0821","name":"弹药工程与爆炸技术"},"082105":{"code":"082105","parent":"0821","name":"特种能源技术与工程"},"082106":{"code":"082106","parent":"0821","name":"装甲车辆工程"},"082107":{"code":"082107","parent":"0821","name":"信息对抗技术"},"0822":{"code":"0822","parent":"08","name":"核工程类"},"082201":{"code":"082201","parent":"0822","name":"核工程与核技术"},"082202":{"code":"082202","parent":"0822","name":"辐射防护与核安全"},"082203":{"code":"082203","parent":"0822","name":"工程物理"},"082204":{"code":"082204","parent":"0822","name":"核化工与核燃料工程"},"0823":{"code":"0823","parent":"08","name":"农业工程类"},"082301":{"code":"082301","parent":"0823","name":"农业工程"},"082302":{"code":"082302","parent":"0823","name":"农业机械化及其自动化"},"082303":{"code":"082303","parent":"0823","name":"农业电气化"},"082304":{"code":"082304","parent":"0823","name":"农业建筑环境与能源工程"},"082305":{"code":"082305","parent":"0823","name":"农业水利工程"},"0824":{"code":"0824","parent":"08","name":"林业工程类"},"082401":{"code":"082401","parent":"0824","name":"森林工程"},"082402":{"code":"082402","parent":"0824","name":"木材科学与工程"},"082403":{"code":"082403","parent":"0824","name":"林产化工"},"0825":{"code":"0825","parent":"08","name":"环境科学与工程类"},"082501":{"code":"082501","parent":"0825","name":"环境科学与工程"},"082502":{"code":"082502","parent":"0825","name":"环境工程"},"082503":{"code":"082503","parent":"0825","name":"环境科学"},"082504":{"code":"082504","parent":"0825","name":"环境生态工程"},"0826":{"code":"0826","parent":"08","name":"生物医学工程类"},"082601":{"code":"082601","parent":"0826","name":"生物医学工程"},"0827":{"code":"0827","parent":"08","name":"食品科学与工程类"},"082701":{"code":"082701","parent":"0827","name":"食品科学与工程"},"082702":{"code":"082702","parent":"0827","name":"食品质量与安全"},"082703":{"code":"082703","parent":"0827","name":"粮食工程"},"082704":{"code":"082704","parent":"0827","name":"乳品工程"},"082705":{"code":"082705","parent":"0827","name":"酿酒工程"},"0828":{"code":"0828","parent":"08","name":"建筑类"},"082801":{"code":"082801","parent":"0828","name":"建筑学"},"082802":{"code":"082802","parent":"0828","name":"城乡规划"},"082803":{"code":"082803","parent":"0828","name":"风景园林"},"0829":{"code":"0829","parent":"08","name":"安全科学与工程类"},"082901":{"code":"082901","parent":"0829","name":"安全工程"},"0830":{"code":"0830","parent":"08","name":"生物工程类"},"083001":{"code":"083001","parent":"0830","name":"生物工程"},"0831":{"code":"0831","parent":"08","name":"公安技术类"},"083101K":{"code":"083101K","parent":"0831","name":"刑事科学技术"},"083102K":{"code":"083102K","parent":"0831","name":"消防工程"},"09":{"code":"09","parent":0,"name":"学科门类：农学"},"0901":{"code":"0901","parent":"09","name":"植物生产类"},"090101":{"code":"090101","parent":"0901","name":"农学"},"090102":{"code":"090102","parent":"0901","name":"园艺"},"090103":{"code":"090103","parent":"0901","name":"植物保护"},"090104":{"code":"090104","parent":"0901","name":"植物科学与技术"},"090105":{"code":"090105","parent":"0901","name":"种子科学与工程"},"090106":{"code":"090106","parent":"0901","name":"设施农业科学与工程"},"0902":{"code":"0902","parent":"09","name":"自然保护与环境生态类"},"090201":{"code":"090201","parent":"0902","name":"农业资源与环境"},"090202":{"code":"090202","parent":"0902","name":"野生动物与自然保护区管理"},"090203":{"code":"090203","parent":"0902","name":"水土保持与荒漠化防治"},"0903":{"code":"0903","parent":"09","name":"动物生产类"},"090301":{"code":"090301","parent":"0903","name":"动物科学"},"0904":{"code":"0904","parent":"09","name":"动物医学类"},"090401":{"code":"090401","parent":"0904","name":"动物医学"},"090402":{"code":"090402","parent":"0904","name":"动物药学"},"0905":{"code":"0905","parent":"09","name":"林学类"},"090501":{"code":"090501","parent":"0905","name":"林学"},"090502":{"code":"090502","parent":"0905","name":"园林"},"090503":{"code":"090503","parent":"0905","name":"森林保护"},"0906":{"code":"0906","parent":"09","name":"水产类"},"090601":{"code":"090601","parent":"0906","name":"水产养殖学"},"090602":{"code":"090602","parent":"0906","name":"海洋渔业科学与技术"},"0907":{"code":"0907","parent":"09","name":"草学类"},"090701":{"code":"090701","parent":"0907","name":"草业科学"},"100101K":{"code":"100101K","parent":"1001","name":"基础医学"},"100201K":{"code":"100201K","parent":"1002","name":"临床医学"},"100301K":{"code":"100301K","parent":"1003","name":"口腔医学"},"100401K":{"code":"100401K","parent":"1004","name":"预防医学"},"100501K":{"code":"100501K","parent":"1005","name":"中医学"},"100502K":{"code":"100502K","parent":"1005","name":"针灸推拿学"},"100503K":{"code":"100503K","parent":"1005","name":"藏医学"},"100504K":{"code":"100504K","parent":"1005","name":"蒙医学"},"100505K":{"code":"100505K","parent":"1005","name":"维医学"},"100506K":{"code":"100506K","parent":"1005","name":"壮医学"},"100507K":{"code":"100507K","parent":"1005","name":"哈医学"},"100601K":{"code":"100601K","parent":"1006","name":"中西医临床医学"},"100901K":{"code":"100901K","parent":"1009","name":"法医学"},"120201K":{"code":"120201K","parent":"1202","name":"工商管理"},"120203K":{"code":"120203K","parent":"1202","name":"会计学"},"120901K":{"code":"120901K","parent":"1209","name":"旅游管理"},"010104T":{"code":"010104T","parent":"0101","name":"伦理学"},"020103T":{"code":"020103T","parent":"0201","name":"国民经济管理"},"020104T":{"code":"020104T","parent":"0201","name":"资源与环境经济学"},"020105T":{"code":"020105T","parent":"0201","name":"商务经济学"},"020106T":{"code":"020106T","parent":"0201","name":"能源经济"},"020305T":{"code":"020305T","parent":"0203","name":"金融数学"},"020306T":{"code":"020306T","parent":"0203","name":"信用管理"},"020307T":{"code":"020307T","parent":"0203","name":"经济与金融"},"030102T":{"code":"030102T","parent":"0301","name":"知识产权"},"030103T":{"code":"030103T","parent":"0301","name":"监狱学"},"030204T":{"code":"030204T","parent":"0302","name":"国际事务与国际关系"},"030205T":{"code":"030205T","parent":"0302","name":"政治学、经济学与哲学"},"030303T":{"code":"030303T","parent":"0303","name":"人类学"},"030304T":{"code":"030304T","parent":"0303","name":"女性学"},"030305T":{"code":"030305T","parent":"0303","name":"家政学"},"030604TK":{"code":"030604TK","parent":"0306","name":"禁毒学"},"030605TK":{"code":"030605TK","parent":"0306","name":"警犬技术"},"030606TK":{"code":"030606TK","parent":"0306","name":"经济犯罪侦查"},"030607TK":{"code":"030607TK","parent":"0306","name":"边防指挥"},"030608TK":{"code":"030608TK","parent":"0306","name":"消防指挥"},"030609TK":{"code":"030609TK","parent":"0306","name":"警卫学"},"030610TK":{"code":"030610TK","parent":"0306","name":"公安情报学"},"030611TK":{"code":"030611TK","parent":"0306","name":"犯罪学"},"030612TK":{"code":"030612TK","parent":"0306","name":"公安管理学"},"030613TK":{"code":"030613TK","parent":"0306","name":"涉外警务"},"030614TK":{"code":"030614TK","parent":"0306","name":"国内安全保卫"},"030615TK":{"code":"030615TK","parent":"0306","name":"警务指挥与战术"},"040109T":{"code":"040109T","parent":"0401","name":"华文教育"},"040206T":{"code":"040206T","parent":"0402","name":"运动康复"},"040207T":{"code":"040207T","parent":"0402","name":"休闲体育"},"050106T":{"code":"050106T","parent":"0501","name":"应用语言学"},"050107T":{"code":"050107T","parent":"0501","name":"秘书学"},"050306T":{"code":"050306T","parent":"0503","name":"网络与新媒体"},"050307T":{"code":"050307T","parent":"0503","name":"数字出版"},"060105T":{"code":"060105T","parent":"0601","name":"文物保护技术"},"060106T":{"code":"060106T","parent":"0601","name":"外国语言与外国历史"},"070103T":{"code":"070103T","parent":"0701","name":"数理基础科学"},"070204T":{"code":"070204T","parent":"0702","name":"声学"},"070303T":{"code":"070303T","parent":"0703","name":"化学生物学"},"070304T":{"code":"070304T","parent":"0703","name":"分子科学与工程"},"070703T":{"code":"070703T","parent":"0707","name":"海洋资源与环境"},"070704T":{"code":"070704T","parent":"0707","name":"军事海洋学"},"070903T":{"code":"070903T","parent":"0709","name":"地球信息科学与技术"},"070904T":{"code":"070904T","parent":"0709","name":"古生物学"},"080209T":{"code":"080209T","parent":"0802","name":"机械工艺技术"},"080210T":{"code":"080210T","parent":"0802","name":"微机电系统工程"},"080211T":{"code":"080211T","parent":"0802","name":"机电技术教育"},"080212T":{"code":"080212T","parent":"0802","name":"汽车维修工程教育"},"080409T":{"code":"080409T","parent":"0804","name":"粉体材料科学与工程"},"080410T":{"code":"080410T","parent":"0804","name":"宝石及材料工艺学"},"080411T":{"code":"080411T","parent":"0804","name":"焊接技术与工程"},"080412T":{"code":"080412T","parent":"0804","name":"功能材料"},"080413T":{"code":"080413T","parent":"0804","name":"纳米材料与技术"},"080414T":{"code":"080414T","parent":"0804","name":"新能源材料与器件"},"080502T":{"code":"080502T","parent":"0805","name":"能源与环境系统工程"},"080503T":{"code":"080503T","parent":"0805","name":"新能源科学与工程"},"080602T":{"code":"080602T","parent":"0806","name":"智能电网信息工程"},"080603T":{"code":"080603T","parent":"0806","name":"光源与照明"},"080604T":{"code":"080604T","parent":"0806","name":"电气工程与智能控制"},"080707T":{"code":"080707T","parent":"0807","name":"广播电视工程"},"080708T":{"code":"080708T","parent":"0807","name":"水声工程"},"080709T":{"code":"080709T","parent":"0807","name":"电子封装技术"},"080710T":{"code":"080710T","parent":"0807","name":"集成电路设计与集成系统"},"080711T":{"code":"080711T","parent":"0807","name":"医学信息工程"},"080712T":{"code":"080712T","parent":"0807","name":"电磁场与无线技术"},"080713T":{"code":"080713T","parent":"0807","name":"电波传播与天线"},"080714T":{"code":"080714T","parent":"0807","name":"电子信息科学与技术"},"080715T":{"code":"080715T","parent":"0807","name":"电信工程及管理"},"080716T":{"code":"080716T","parent":"0807","name":"应用电子技术教育"},"080802T":{"code":"080802T","parent":"0808","name":"轨道交通信号与控制"},"080907T":{"code":"080907T","parent":"0809","name":"智能科学与技术"},"080908T":{"code":"080908T","parent":"0809","name":"空间信息与数字技术"},"080909T":{"code":"080909T","parent":"0809","name":"电子与计算机工程"},"081005T":{"code":"081005T","parent":"0810","name":"城市地下空间工程"},"081006T":{"code":"081006T","parent":"0810","name":"道路桥梁与渡河工程"},"081104T":{"code":"081104T","parent":"0811","name":"水务工程"},"081203T":{"code":"081203T","parent":"0812","name":"导航工程"},"081204T":{"code":"081204T","parent":"0812","name":"地理国情监测"},"081303T":{"code":"081303T","parent":"0813","name":"资源循环科学与工程"},"081304T":{"code":"081304T","parent":"0813","name":"能源化学工程"},"081305T":{"code":"081305T","parent":"0813","name":"化学工程与工业生物工程"},"081404T":{"code":"081404T","parent":"0814","name":"地下水科学与工程"},"081505T":{"code":"081505T","parent":"0815","name":"矿物资源工程"},"081506T":{"code":"081506T","parent":"0815","name":"海洋油气工程"},"081603T":{"code":"081603T","parent":"0816","name":"非织造材料与工程"},"081604T":{"code":"081604T","parent":"0816","name":"服装设计与工艺教育"},"081806T":{"code":"081806T","parent":"0818","name":"交通设备与控制工程"},"081807T":{"code":"081807T","parent":"0818","name":"救助与打捞工程"},"081808TK":{"code":"081808TK","parent":"0818","name":"船舶电子电气工程"},"081902T":{"code":"081902T","parent":"0819","name":"海洋工程与技术"},"081903T":{"code":"081903T","parent":"0819","name":"海洋资源开发技术"},"082006T":{"code":"082006T","parent":"0820","name":"飞行器质量与可靠性"},"082007T":{"code":"082007T","parent":"0820","name":"飞行器适航技术"},"082505T":{"code":"082505T","parent":"0825","name":"环保设备工程"},"082506T":{"code":"082506T","parent":"0825","name":"资源环境科学"},"082507T":{"code":"082507T","parent":"0825","name":"水质科学与技术"},"082602T":{"code":"082602T","parent":"0826","name":"假肢矫形工程"},"082706T":{"code":"082706T","parent":"0827","name":"葡萄与葡萄酒工程"},"082707T":{"code":"082707T","parent":"0827","name":"食品营养与检验教育"},"082708T":{"code":"082708T","parent":"0827","name":"烹饪与营养教育"},"082804T":{"code":"082804T","parent":"0828","name":"历史建筑保护工程"},"083002T":{"code":"083002T","parent":"0830","name":"生物制药"},"083103TK":{"code":"083103TK","parent":"0831","name":"交通管理工程"},"083104TK":{"code":"083104TK","parent":"0831","name":"安全防范工程"},"083105TK":{"code":"083105TK","parent":"0831","name":"公安视听技术"},"083106TK":{"code":"083106TK","parent":"0831","name":"抢险救援指挥与技术"},"083107TK":{"code":"083107TK","parent":"0831","name":"火灾勘查"},"083108TK":{"code":"083108TK","parent":"0831","name":"网络安全与执法"},"083109TK":{"code":"083109TK","parent":"0831","name":"核生化消防"},"090107T":{"code":"090107T","parent":"0901","name":"茶学"},"090108T":{"code":"090108T","parent":"0901","name":"烟草"},"090109T":{"code":"090109T","parent":"0901","name":"应用生物科学"},"090110T":{"code":"090110T","parent":"0901","name":"农艺教育"},"090111T":{"code":"090111T","parent":"0901","name":"园艺教育"},"090302T":{"code":"090302T","parent":"0903","name":"蚕学"},"090303T":{"code":"090303T","parent":"0903","name":"蜂学"},"090403T":{"code":"090403T","parent":"0904","name":"动植物检疫"},"090603T":{"code":"090603T","parent":"0906","name":"水族科学与技术"},"100202TK":{"code":"100202TK","parent":"1002","name":"麻醉学"},"100203TK":{"code":"100203TK","parent":"1002","name":"医学影像学"},"100204TK":{"code":"100204TK","parent":"1002","name":"眼视光医学"},"100205TK":{"code":"100205TK","parent":"1002","name":"精神医学"},"100206TK":{"code":"100206TK","parent":"1002","name":"放射医学"},"100403TK":{"code":"100403TK","parent":"1004","name":"妇幼保健医学"},"100404TK":{"code":"100404TK","parent":"1004","name":"卫生监督"},"100405TK":{"code":"100405TK","parent":"1004","name":"全球健康学"},"100703TK":{"code":"100703TK","parent":"1007","name":"临床药学"},"100704T":{"code":"100704T","parent":"1007","name":"药事管理"},"100705T":{"code":"100705T","parent":"1007","name":"药物分析"},"100706T":{"code":"100706T","parent":"1007","name":"药物化学"},"100707T":{"code":"100707T","parent":"1007","name":"海洋药学"},"100803T":{"code":"100803T","parent":"1008","name":"藏药学"},"100804T":{"code":"100804T","parent":"1008","name":"蒙药学"},"100805T":{"code":"100805T","parent":"1008","name":"中药制药"},"100806T":{"code":"100806T","parent":"1008","name":"中草药栽培与鉴定"},"101008T":{"code":"101008T","parent":"1010","name":"听力与言语康复学"},"120106TK":{"code":"120106TK","parent":"1201","name":"保密管理"},"120211T":{"code":"120211T","parent":"1202","name":"劳动关系"},"120212T":{"code":"120212T","parent":"1202","name":"体育经济与管理"},"120213T":{"code":"120213T","parent":"1202","name":"财务会计教育"},"120214T":{"code":"120214T","parent":"1202","name":"市场营销教育"},"120406TK":{"code":"120406TK","parent":"1204","name":"海关管理"},"120407T":{"code":"120407T","parent":"1204","name":"交通管理"},"120408T":{"code":"120408T","parent":"1204","name":"海事管理"},"120409T":{"code":"120409T","parent":"1204","name":"公共关系学"},"120603T":{"code":"120603T","parent":"1206","name":"采购管理"},"120702T":{"code":"120702T","parent":"1207","name":"标准化工程"},"120703T":{"code":"120703T","parent":"1207","name":"质量管理工程"},"120802T":{"code":"120802T","parent":"1208","name":"电子商务及法律"},"120904T":{"code":"120904T","parent":"1209","name":"旅游管理与服务教育"},"130311T":{"code":"130311T","parent":"1303","name":"影视摄影与制作"},"130405T":{"code":"130405T","parent":"1304","name":"书法学"},"130406T":{"code":"130406T","parent":"1304","name":"中国画"}}';

           $subject_ = json_decode($json );
           //var_dump($subject);
           $subject =[];
            foreach ($subject_ as  $key =>$value )
            {
                $subject[$key] = $value;
            }

            ksort( $subject , SORT_LOCALE_STRING );
            // var_dump($subject);

           foreach ($subject  as &$value)
           {
               if( $value->parent )
                   $data['parentId'] = $subject[ $value->parent ]->id;

               $data['code']  = $value->code;
               $data['name'] = $value->name;
               $data['groupId'] = 1;

               Yii::$app->db->createCommand()->insert('category' , $data)->execute();
               $insertId = Yii::$app->db->getLastInsertID();

               $value->id = $insertId;

           }

     }

     //采集大学
     public  function  actionCaiji()
     {
          $url = 'http://gkcx.eol.cn/soudaxue/queryschool.html?&page=1';

          $content = file_get_contents($url);

           file_put_contents('school.txt' ,$content) ;
     }

}